/* eslint-disable @nrwl/nx/enforce-module-boundaries */
import { Component, Input } from '@angular/core';
import { ActivatedRoute } from '@angular/router';
//qui c'è il collegamento tra products e orders
import { Product123 } from '../../models/product123';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@angular/common";
function ProductItemComponent_div_11_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r0.product.price));
} }
function ProductItemComponent_span_15_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 13);
    i0.ɵɵtext(1);
    i0.ɵɵelementStart(2, "span", 14);
    i0.ɵɵtext(3, "unread messages");
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵtextInterpolate1(" -", ctx_r1.discount, "% ");
} }
const _c0 = function (a0) { return [a0]; };
const _c1 = function (a0) { return { "background-image": a0 }; };
export class ProductItemComponent {
    constructor(route) {
        this.route = route;
        this.w = false;
        this.discount = 0;
        this.finalPrice = 0;
    }
    async ngOnInit() {
        // 
        console.log("IMMAGINE= " + this.product.image);
        let blob = await this.ajaxGetImageData(this.product.image);
        const reader = new FileReader();
        reader.readAsDataURL(blob);
        reader.onloadend = () => {
            const base64data = reader.result;
            this.imgBlob = base64data;
            this._retrieveParam();
        };
        this.finalPrice = this.product.price - this.product.discount;
        this.discount = Math.round((this.product.discount / this.product.price) * 100);
    }
    _retrieveParam() {
        this.url = this.route.url;
        if (this.url.value[0].path === 'women-products') {
            this.w = true;
        }
        // console.log(this.w);
    }
    async ajaxGetImageData(url) {
        const response = await fetch(url, { cache: "no-store" });
        const imageBlob = await response.blob();
        this.appBackImg = imageBlob;
        return imageBlob;
        //Code to get base64 image string
    }
}
ProductItemComponent.ɵfac = function ProductItemComponent_Factory(t) { return new (t || ProductItemComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute)); };
ProductItemComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ProductItemComponent, selectors: [["eshop-frontend-product-item"]], inputs: { product: "product", appBackImg: "appBackImg" }, decls: 16, vars: 14, consts: [[1, "container-fluid", "p-0", "mb-2", "productCard", 2, "height", "390px"], [1, "grid", "m-0", "w-100", 2, "justify-content", "center", "height", "360px"], [1, "row", "w-100", 2, "height", "280px"], [1, "col-12", 2, "background-size", "cover", "background-repeat", "no-repeat", "background-color", "#8282823a", "background-blend-mode", "multiply", "background-position-y", "center", 3, "routerLink", "ngStyle"], [1, "row", "w-100", 2, "height", "74px"], [1, "col-12", "p-0", 2, "overflow-y", "auto", "font-size", "small", "max-height", "40px"], [1, "col-6", "pb-0", "mb-0", "price", "p-0"], [1, "mb-0", 2, "font-weight", "900"], ["class", "col-6 price p-0", "style", "text-decoration:  line-through; font-weight: 100; color: rgb(98, 98, 98);", 4, "ngIf"], [1, "row", "w-100", 2, "height", "20px"], ["type", "button", 1, "btn", "btn-outline-dark", "w-100", "position-relative"], ["class", "position-absolute start-100 translate-middle badge rounded-pill bg-danger", "style", "transform: translateX(-46px)!important; border-radius: 5px!important;", 4, "ngIf"], [1, "col-6", "price", "p-0", 2, "text-decoration", "line-through", "font-weight", "100", "color", "rgb(98, 98, 98)"], [1, "position-absolute", "start-100", "translate-middle", "badge", "rounded-pill", "bg-danger", 2, "transform", "translateX(-46px)!important", "border-radius", "5px!important"], [1, "visually-hidden"]], template: function ProductItemComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "div", 2);
        i0.ɵɵelement(3, "div", 3);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(4, "div", 4)(5, "div", 5);
        i0.ɵɵtext(6);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(7, "div", 6)(8, "p", 7);
        i0.ɵɵtext(9);
        i0.ɵɵpipe(10, "currency");
        i0.ɵɵelementEnd()();
        i0.ɵɵtemplate(11, ProductItemComponent_div_11_Template, 3, 3, "div", 8);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(12, "div", 9)(13, "button", 10);
        i0.ɵɵtext(14, "Acquista ");
        i0.ɵɵtemplate(15, ProductItemComponent_span_15_Template, 4, 1, "span", 11);
        i0.ɵɵelementEnd()()()();
    } if (rf & 2) {
        i0.ɵɵadvance(3);
        i0.ɵɵproperty("routerLink", ctx.w ? i0.ɵɵpureFunction1(8, _c0, "/women-products/" + ctx.product.id) : i0.ɵɵpureFunction1(10, _c0, "/products/" + ctx.product.id))("ngStyle", i0.ɵɵpureFunction1(12, _c1, "url(" + ctx.imgBlob + ")"));
        i0.ɵɵadvance(3);
        i0.ɵɵtextInterpolate(ctx.product.name);
        i0.ɵɵadvance(3);
        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 6, ctx.product.price - ctx.product.discount));
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.product.discount != 0);
        i0.ɵɵadvance(4);
        i0.ɵɵproperty("ngIf", ctx.product.discount / ctx.product.price * 100 != 0);
    } }, directives: [i1.RouterLink, i2.NgStyle, i2.NgIf], pipes: [i2.CurrencyPipe], styles: [".productCard[_ngcontent-%COMP%]{width:200px}@media screen and (min-width: 375px) and (max-width: 516px){.productCard[_ngcontent-%COMP%]{width:180px}.price[_ngcontent-%COMP%]{font-size:small}}@media screen and (min-width: 300px) and (max-width: 374px){.productCard[_ngcontent-%COMP%]{width:160px}.price[_ngcontent-%COMP%]{font-size:small}}"] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(ProductItemComponent, [{
        type: Component,
        args: [{ selector: 'eshop-frontend-product-item', template: "<!--div class=\"product-item\" *ngIf=\"product\" style=\"    MAX-WIDTH: 300PX; margin:auto\" [routerLink]=\" w ? ['/women-products/' + product.id] : ['/products/' + product.id]\">\r\n    <div class=\"product-item-wrapper\">\r\n\r\n        <div class=\"grid\" style=\"justify-content: center;\">\r\n            <div class=\"row w-100\" style=\"min-height: 200px;\">\r\n                <div class=\"col d-flex justify-content-center\">\r\n                <div [routerLink]=\" w ? ['/women-products/' + product.id] : ['/products/' + product.id]\" [ngStyle]=\"{ 'background-image': 'url(' + imgBlob + ')'}\" style=\" min-width: 140px;\r\n                background-size: cover;\r\n                background-repeat: no-repeat;\r\n                transform: translateY(-25%);\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row\" style=\"width: -webkit-fill-available; min-height: 100px; max-height: 100px;\">\r\n                <div class=\"col-12 d-flex justify-content-center\" style=\"text-align: center;\">\r\n                    <p class=\"name\" style=\"text-align: center;\">{{product.name}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"row\" style=\"width: -webkit-fill-available;    width: -webkit-fill-available; width: fill-available;\">\r\n                <div class=\"col-12 d-flex justify-content-center\">\r\n                        <h5 class=\"price\" style=\"width: 100%; text-align: center;\">{{product.price | currency}}</h5>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class=\"container-fluid p-0 mb-2 \" style=\"max-width: fit-content; height: 360px; background-color: #7e7e7e1a;\">\r\n\r\n    <div class=\"grid m-0 \" style=\"justify-content: center; width: 240px; height: 329.94px;\">\r\n        <div class=\"row \" style=\"width: 140px; min-height:190px;\">\r\n            <div class=\"col-12\" [routerLink]=\" w ? ['/women-products/' + product.id] : ['/products/' + product.id]\" [ngStyle]=\"{ 'background-image': 'url(' + imgBlob + ')'}\" style=\"\r\n            background-size: cover;\r\n            background-repeat: no-repeat;\r\n            background-color: #8282823a;\r\n            background-blend-mode: multiply;\r\n            background-position-y: center;\">\r\n            </div>\r\n        </div>\r\n        <div class=\"row \">\r\n            <div class=\"col-auto\" style=\"height: 60px; overflow-y: auto\">{{product.name}}</div>\r\n            <div class=\"col-12 pb-0 mb-0\"><p class=\"mb-0\" style=\"font-weight:900;\">{{product.price - product.discount | currency}}</p></div>\r\n            <div *ngIf=\"product.discount !=0\" class=\"col-12\" style=\"text-decoration:  line-through; font-weight: 100; color: rgb(98, 98, 98);\">{{product.price | currency}}</div>\r\n            <div *ngIf=\"product.discount == 0\" class=\"col-12\"  style=\"min-height: 39.99px;\"></div>\r\n        </div>\r\n        <div class=\"row w-100 p-0\" style=\"background-color: white;\"><div class=\"col-12 w-100 p-0\" style=\"    display: flex;\r\n            align-items: self-end;\">\r\n            <button type=\"button\" class=\"btn btn-outline-dark w-100 position-relative\">Acquista \r\n                <span *ngIf=\"(product.discount / product.price) * 100 != 0\"  class=\"position-absolute start-96 translate-middle badge rounded-pill bg-danger\">\r\n                    -{{discount}}%\r\n                    <span class=\"visually-hidden\">unread messages</span>\r\n                  </span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n-->\r\n\r\n<div class=\"container-fluid p-0 mb-2 productCard\" style=\" height:390px\">\r\n    <div class=\"grid m-0 w-100\" style=\"justify-content: center; height: 360px;\" >\r\n        <div class=\"row w-100\" style=\"height: 280px;\">\r\n            <div class=\"col-12\" [routerLink]=\" w ? ['/women-products/' + product.id] : ['/products/' + product.id]\" [ngStyle]=\"{ 'background-image': 'url(' + imgBlob + ')'}\" style=\"\r\n            background-size: cover;\r\n            background-repeat: no-repeat;\r\n            background-color: #8282823a;\r\n            background-blend-mode: multiply;\r\n            background-position-y: center;\">\r\n            </div>\r\n        </div>\r\n        <div class=\"row w-100\" style=\"height: 74px;\">\r\n            <div class=\"col-12 p-0\" style=\" overflow-y: auto; font-size: small;     max-height: 40px;\">{{product.name}}</div>\r\n            <div class=\"col-6 pb-0 mb-0 price p-0\"><p class=\"mb-0\" style=\"font-weight:900;\">{{product.price - product.discount | currency}}</p></div>\r\n            <div *ngIf=\"product.discount !=0\" class=\"col-6 price p-0\" style=\"text-decoration:  line-through; font-weight: 100; color: rgb(98, 98, 98);\">{{product.price | currency}}</div>\r\n           \r\n        </div>\r\n        <div class=\"row w-100\" style=\"height: 20px;\">\r\n            <button type=\"button\" class=\"btn btn-outline-dark w-100 position-relative\">Acquista \r\n                <span *ngIf=\"(product.discount / product.price) * 100 != 0\"  class=\"position-absolute start-100 translate-middle badge rounded-pill bg-danger\" style=\"transform: translateX(-46px)!important; border-radius: 5px!important;\">\r\n                    -{{discount}}%\r\n                    <span class=\"visually-hidden\">unread messages</span>\r\n                  </span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>", styles: [".productCard{width:200px}@media screen and (min-width: 375px) and (max-width: 516px){.productCard{width:180px}.price{font-size:small}}@media screen and (min-width: 300px) and (max-width: 374px){.productCard{width:160px}.price{font-size:small}}\n"] }]
    }], function () { return [{ type: i1.ActivatedRoute }]; }, { product: [{
            type: Input
        }], appBackImg: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcHJvZHVjdHMvc3JjL2xpYi9jb21wb25lbnRzL3Byb2R1Y3QtaXRlbS9wcm9kdWN0LWl0ZW0uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wcm9kdWN0cy9zcmMvbGliL2NvbXBvbmVudHMvcHJvZHVjdC1pdGVtL3Byb2R1Y3QtaXRlbS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx1REFBdUQ7QUFDdkQsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2pELCtDQUErQztBQUMvQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0seUJBQXlCLENBQUM7Ozs7O0lDc0V6QywrQkFBNEk7SUFBQSxZQUE0Qjs7SUFBQSxpQkFBTTs7O0lBQWxDLGVBQTRCO0lBQTVCLGdFQUE0Qjs7O0lBS3BLLGdDQUE2TjtJQUN6TixZQUNBO0lBQUEsZ0NBQThCO0lBQUEsK0JBQWU7SUFBQSxpQkFBTyxFQUFBOzs7SUFEcEQsZUFDQTtJQURBLGtEQUNBOzs7O0FEckVwQixNQUFNLE9BQU8sb0JBQW9CO0lBVy9CLFlBQW9CLEtBQXFCO1FBQXJCLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBVnpDLE1BQUMsR0FBRyxLQUFLLENBQUM7UUFHVixhQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQ2IsZUFBVSxHQUFHLENBQUMsQ0FBQztJQU04QixDQUFDO0lBRTlDLEtBQUssQ0FBQyxRQUFRO1FBQ2IsR0FBRztRQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7UUFFOUMsSUFBSSxJQUFJLEdBQUcsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6RCxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLFNBQVMsR0FBRyxHQUFHLEVBQUU7WUFDdEIsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUNqQyxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQztZQUMxQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQyxDQUFBO1FBRUgsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUM3RCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFJLEdBQUcsQ0FBQyxDQUFBO0lBRWhGLENBQUM7SUFFTyxjQUFjO1FBRXBCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFFMUIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7WUFDL0MsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7U0FDZjtRQUNELHVCQUF1QjtJQUd6QixDQUFDO0lBR0QsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEdBQUc7UUFFeEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxLQUFLLENBQUMsR0FBRyxFQUFFLEVBQUMsS0FBSyxFQUFFLFVBQVUsRUFBQyxDQUFDLENBQUM7UUFDdkQsTUFBTSxTQUFTLEdBQUcsTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFeEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7UUFDNUIsT0FBTyxTQUFTLENBQUM7UUFHbkIsaUNBQWlDO0lBQ25DLENBQUM7O3dGQXZEWSxvQkFBb0I7dUVBQXBCLG9CQUFvQjtRQ2dEakMsOEJBQXdFLGFBQUEsYUFBQTtRQUc1RCx5QkFNTTtRQUNWLGlCQUFNO1FBQ04sOEJBQTZDLGFBQUE7UUFDa0QsWUFBZ0I7UUFBQSxpQkFBTTtRQUNqSCw4QkFBdUMsV0FBQTtRQUF5QyxZQUErQzs7UUFBQSxpQkFBSSxFQUFBO1FBQ25JLHVFQUE4SztRQUVsTCxpQkFBTTtRQUNOLCtCQUE2QyxrQkFBQTtRQUNrQywwQkFDdkU7UUFBQSwwRUFHUztRQUNiLGlCQUFTLEVBQUEsRUFBQSxFQUFBOztRQXBCVyxlQUFtRjtRQUFuRixpS0FBbUYsb0VBQUE7UUFTWixlQUFnQjtRQUFoQixzQ0FBZ0I7UUFDM0IsZUFBK0M7UUFBL0MscUZBQStDO1FBQ3pILGVBQTBCO1FBQTFCLGdEQUEwQjtRQUtyQixlQUFtRDtRQUFuRCwwRUFBbUQ7O3VGRG5FN0Qsb0JBQW9CO2NBTGhDLFNBQVM7MkJBQ0UsNkJBQTZCO2lFQVc5QixPQUFPO2tCQUFmLEtBQUs7WUFFRyxVQUFVO2tCQUFsQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQG5yd2wvbngvZW5mb3JjZS1tb2R1bGUtYm91bmRhcmllcyAqL1xyXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG4vL3F1aSBjJ8OoIGlsIGNvbGxlZ2FtZW50byB0cmEgcHJvZHVjdHMgZSBvcmRlcnNcclxuaW1wb3J0IHsgUHJvZHVjdDEyMyB9IGZyb20gJy4uLy4uL21vZGVscy9wcm9kdWN0MTIzJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2VzaG9wLWZyb250ZW5kLXByb2R1Y3QtaXRlbScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3Byb2R1Y3QtaXRlbS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcHJvZHVjdC1pdGVtLWNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFByb2R1Y3RJdGVtQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICB3ID0gZmFsc2U7XHJcbiAgdXJsO1xyXG4gIGltZ0Jsb2I7XHJcbiAgZGlzY291bnQgPSAwO1xyXG4gIGZpbmFsUHJpY2UgPSAwO1xyXG5cclxuICBASW5wdXQoKSBwcm9kdWN0OiBQcm9kdWN0MTIzO1xyXG5cclxuICBASW5wdXQoKSBhcHBCYWNrSW1nO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSkgeyB9XHJcblxyXG4gIGFzeW5jIG5nT25Jbml0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAvLyBcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIklNTUFHSU5FPSBcIiArIHRoaXMucHJvZHVjdC5pbWFnZSlcclxuXHJcbiAgICBsZXQgYmxvYiA9IGF3YWl0IHRoaXMuYWpheEdldEltYWdlRGF0YSh0aGlzLnByb2R1Y3QuaW1hZ2UpO1xyXG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gcmVhZGVyLnJlc3VsdDtcclxuICAgICAgICB0aGlzLmltZ0Jsb2IgPSBiYXNlNjRkYXRhO1xyXG4gICAgICAgIHRoaXMuX3JldHJpZXZlUGFyYW0oKTtcclxuICAgICAgfVxyXG5cclxuICAgIHRoaXMuZmluYWxQcmljZSA9IHRoaXMucHJvZHVjdC5wcmljZSAtIHRoaXMucHJvZHVjdC5kaXNjb3VudDtcclxuICAgIHRoaXMuZGlzY291bnQgPSBNYXRoLnJvdW5kKCAodGhpcy5wcm9kdWN0LmRpc2NvdW50L3RoaXMucHJvZHVjdC5wcmljZSkgICogMTAwKVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3JldHJpZXZlUGFyYW0oKXtcclxuIFxyXG4gICAgdGhpcy51cmwgPSB0aGlzLnJvdXRlLnVybDtcclxuXHJcbiAgICBpZiAodGhpcy51cmwudmFsdWVbMF0ucGF0aCA9PT0gJ3dvbWVuLXByb2R1Y3RzJykge1xyXG4gICAgICB0aGlzLncgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy53KTtcclxuICAgIFxyXG5cclxuICB9XHJcblxyXG5cclxuICBhc3luYyBhamF4R2V0SW1hZ2VEYXRhKHVybCkge1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7Y2FjaGU6IFwibm8tc3RvcmVcIn0pO1xyXG4gICAgY29uc3QgaW1hZ2VCbG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG5cclxuICAgIHRoaXMuYXBwQmFja0ltZyA9IGltYWdlQmxvYjtcclxuICAgIHJldHVybiBpbWFnZUJsb2I7XHJcblxyXG5cclxuICAvL0NvZGUgdG8gZ2V0IGJhc2U2NCBpbWFnZSBzdHJpbmdcclxufVxyXG5cclxuXHJcbiAgLy8gYWRkUHJvZHVjdFRvQ2FydCgpe1xyXG4gIC8vICAgY29uc3QgY2FydEl0ZW06IENhcnRJdGVtID0ge1xyXG4gIC8vICAgICBwcm9kdWN0SWQ6IHRoaXMucHJvZHVjdC5pZCxcclxuICAvLyAgICAgcXVhbnRpdHk6IDFcclxuICAvLyAgIH1cclxuXHJcbiAgLy8gICB0aGlzLmNhcnRTZXJ2aWNlLnNldENhcnRJdGVtKGNhcnRJdGVtKTtcclxuICAvLyB9XHJcblxyXG59XHJcbiIsIjwhLS1kaXYgY2xhc3M9XCJwcm9kdWN0LWl0ZW1cIiAqbmdJZj1cInByb2R1Y3RcIiBzdHlsZT1cIiAgICBNQVgtV0lEVEg6IDMwMFBYOyBtYXJnaW46YXV0b1wiIFtyb3V0ZXJMaW5rXT1cIiB3ID8gWycvd29tZW4tcHJvZHVjdHMvJyArIHByb2R1Y3QuaWRdIDogWycvcHJvZHVjdHMvJyArIHByb2R1Y3QuaWRdXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1pdGVtLXdyYXBwZXJcIj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImdyaWRcIiBzdHlsZT1cImp1c3RpZnktY29udGVudDogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHctMTAwXCIgc3R5bGU9XCJtaW4taGVpZ2h0OiAyMDBweDtcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgW3JvdXRlckxpbmtdPVwiIHcgPyBbJy93b21lbi1wcm9kdWN0cy8nICsgcHJvZHVjdC5pZF0gOiBbJy9wcm9kdWN0cy8nICsgcHJvZHVjdC5pZF1cIiBbbmdTdHlsZV09XCJ7ICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybCgnICsgaW1nQmxvYiArICcpJ31cIiBzdHlsZT1cIiBtaW4td2lkdGg6IDE0MHB4O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTI1JSk7XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBzdHlsZT1cIndpZHRoOiAtd2Via2l0LWZpbGwtYXZhaWxhYmxlOyBtaW4taGVpZ2h0OiAxMDBweDsgbWF4LWhlaWdodDogMTAwcHg7XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJuYW1lXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+e3twcm9kdWN0Lm5hbWV9fTwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiIHN0eWxlPVwid2lkdGg6IC13ZWJraXQtZmlsbC1hdmFpbGFibGU7ICAgIHdpZHRoOiAtd2Via2l0LWZpbGwtYXZhaWxhYmxlOyB3aWR0aDogZmlsbC1hdmFpbGFibGU7XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz1cInByaWNlXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPnt7cHJvZHVjdC5wcmljZSB8IGN1cnJlbmN5fX08L2g1PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuXHJcblxyXG48ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkIHAtMCBtYi0yIFwiIHN0eWxlPVwibWF4LXdpZHRoOiBmaXQtY29udGVudDsgaGVpZ2h0OiAzNjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzdlN2U3ZTFhO1wiPlxyXG5cclxuICAgIDxkaXYgY2xhc3M9XCJncmlkIG0tMCBcIiBzdHlsZT1cImp1c3RpZnktY29udGVudDogY2VudGVyOyB3aWR0aDogMjQwcHg7IGhlaWdodDogMzI5Ljk0cHg7XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBcIiBzdHlsZT1cIndpZHRoOiAxNDBweDsgbWluLWhlaWdodDoxOTBweDtcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMlwiIFtyb3V0ZXJMaW5rXT1cIiB3ID8gWycvd29tZW4tcHJvZHVjdHMvJyArIHByb2R1Y3QuaWRdIDogWycvcHJvZHVjdHMvJyArIHByb2R1Y3QuaWRdXCIgW25nU3R5bGVdPVwieyAnYmFja2dyb3VuZC1pbWFnZSc6ICd1cmwoJyArIGltZ0Jsb2IgKyAnKSd9XCIgc3R5bGU9XCJcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzgyODI4MjNhO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWJsZW5kLW1vZGU6IG11bHRpcGx5O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6IGNlbnRlcjtcIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1hdXRvXCIgc3R5bGU9XCJoZWlnaHQ6IDYwcHg7IG92ZXJmbG93LXk6IGF1dG9cIj57e3Byb2R1Y3QubmFtZX19PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgcGItMCBtYi0wXCI+PHAgY2xhc3M9XCJtYi0wXCIgc3R5bGU9XCJmb250LXdlaWdodDo5MDA7XCI+e3twcm9kdWN0LnByaWNlIC0gcHJvZHVjdC5kaXNjb3VudCB8IGN1cnJlbmN5fX08L3A+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJwcm9kdWN0LmRpc2NvdW50ICE9MFwiIGNsYXNzPVwiY29sLTEyXCIgc3R5bGU9XCJ0ZXh0LWRlY29yYXRpb246ICBsaW5lLXRocm91Z2g7IGZvbnQtd2VpZ2h0OiAxMDA7IGNvbG9yOiByZ2IoOTgsIDk4LCA5OCk7XCI+e3twcm9kdWN0LnByaWNlIHwgY3VycmVuY3l9fTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwicHJvZHVjdC5kaXNjb3VudCA9PSAwXCIgY2xhc3M9XCJjb2wtMTJcIiAgc3R5bGU9XCJtaW4taGVpZ2h0OiAzOS45OXB4O1wiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdy0xMDAgcC0wXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcIj48ZGl2IGNsYXNzPVwiY29sLTEyIHctMTAwIHAtMFwiIHN0eWxlPVwiICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBzZWxmLWVuZDtcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtZGFyayB3LTEwMCBwb3NpdGlvbi1yZWxhdGl2ZVwiPkFjcXVpc3RhIFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIocHJvZHVjdC5kaXNjb3VudCAvIHByb2R1Y3QucHJpY2UpICogMTAwICE9IDBcIiAgY2xhc3M9XCJwb3NpdGlvbi1hYnNvbHV0ZSBzdGFydC05NiB0cmFuc2xhdGUtbWlkZGxlIGJhZGdlIHJvdW5kZWQtcGlsbCBiZy1kYW5nZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAte3tkaXNjb3VudH19JVxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidmlzdWFsbHktaGlkZGVuXCI+dW5yZWFkIG1lc3NhZ2VzPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG48L2Rpdj5cclxuLS0+XHJcblxyXG48ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkIHAtMCBtYi0yIHByb2R1Y3RDYXJkXCIgc3R5bGU9XCIgaGVpZ2h0OjM5MHB4XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBtLTAgdy0xMDBcIiBzdHlsZT1cImp1c3RpZnktY29udGVudDogY2VudGVyOyBoZWlnaHQ6IDM2MHB4O1wiID5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHctMTAwXCIgc3R5bGU9XCJoZWlnaHQ6IDI4MHB4O1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyXCIgW3JvdXRlckxpbmtdPVwiIHcgPyBbJy93b21lbi1wcm9kdWN0cy8nICsgcHJvZHVjdC5pZF0gOiBbJy9wcm9kdWN0cy8nICsgcHJvZHVjdC5pZF1cIiBbbmdTdHlsZV09XCJ7ICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybCgnICsgaW1nQmxvYiArICcpJ31cIiBzdHlsZT1cIlxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODI4MjgyM2E7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtYmxlbmQtbW9kZTogbXVsdGlwbHk7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb24teTogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHctMTAwXCIgc3R5bGU9XCJoZWlnaHQ6IDc0cHg7XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgcC0wXCIgc3R5bGU9XCIgb3ZlcmZsb3cteTogYXV0bzsgZm9udC1zaXplOiBzbWFsbDsgICAgIG1heC1oZWlnaHQ6IDQwcHg7XCI+e3twcm9kdWN0Lm5hbWV9fTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgcGItMCBtYi0wIHByaWNlIHAtMFwiPjxwIGNsYXNzPVwibWItMFwiIHN0eWxlPVwiZm9udC13ZWlnaHQ6OTAwO1wiPnt7cHJvZHVjdC5wcmljZSAtIHByb2R1Y3QuZGlzY291bnQgfCBjdXJyZW5jeX19PC9wPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwicHJvZHVjdC5kaXNjb3VudCAhPTBcIiBjbGFzcz1cImNvbC02IHByaWNlIHAtMFwiIHN0eWxlPVwidGV4dC1kZWNvcmF0aW9uOiAgbGluZS10aHJvdWdoOyBmb250LXdlaWdodDogMTAwOyBjb2xvcjogcmdiKDk4LCA5OCwgOTgpO1wiPnt7cHJvZHVjdC5wcmljZSB8IGN1cnJlbmN5fX08L2Rpdj5cclxuICAgICAgICAgICBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHctMTAwXCIgc3R5bGU9XCJoZWlnaHQ6IDIwcHg7XCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLWRhcmsgdy0xMDAgcG9zaXRpb24tcmVsYXRpdmVcIj5BY3F1aXN0YSBcclxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiKHByb2R1Y3QuZGlzY291bnQgLyBwcm9kdWN0LnByaWNlKSAqIDEwMCAhPSAwXCIgIGNsYXNzPVwicG9zaXRpb24tYWJzb2x1dGUgc3RhcnQtMTAwIHRyYW5zbGF0ZS1taWRkbGUgYmFkZ2Ugcm91bmRlZC1waWxsIGJnLWRhbmdlclwiIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGVYKC00NnB4KSFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6IDVweCFpbXBvcnRhbnQ7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgLXt7ZGlzY291bnR9fSVcclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInZpc3VhbGx5LWhpZGRlblwiPnVucmVhZCBtZXNzYWdlczwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj4iXX0=