export class ProductLuca {
    constructor() {
        this.images = [];
        this.variants = [];
    }
    setImg(img) {
        this.mainImage = img;
    }
    setVariant(variant) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        this.variants.push(variant);
    }
    /**
     * Aggiunge una variante di un prodotto
     * @param variant la variante da aggiungere
     * @param quantity la quantita da aggiungere
     * Se la variante esiste già, ne incrementa la quantita, altrimenti aggiunge una nuova variante
     */
    addVariant(variant, quantity) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        console.log("adding this quantity: " + quantity);
        if (this.containsVariant(variant)) {
            let index = this.variants.findIndex(p => p.getId() == variant.getId());
            console.log("items available in the inventory =  " + this.variants[index].getInventory());
            console.log("adding this quantity: " + (this.variants[index].getSelected() + quantity));
            this.variants[index].addSelected(quantity);
            console.log("ok");
            return;
        }
        else {
            variant.setSelected(quantity);
            this.variants.push(variant);
        }
    }
    addVariantNoQuantity(variant) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        this.variants.push(variant);
    }
    removeVariant(variant) {
        let index = this.variants.findIndex(product => product.getId() == variant.getId());
        this.variants.splice(index, 1);
    }
    getVariant(variant) {
        let index = this.variants.findIndex(product => product.getId() == variant.getId());
        return this.variants[index];
    }
    getVariantBySize(size) {
        let index = this.variants.findIndex(product => product.getSize() === size);
        return this.variants[index];
    }
    getVariants() {
        return this.variants;
    }
    getId() {
        return this.id;
    }
    getName() {
        return this.name;
    }
    getDiscount() {
        return this.discount;
    }
    getJson() {
        return JSON.stringify(this);
    }
    getPricec() {
        return this.price;
    }
    setId(id) {
        this.id = id;
    }
    setDiscount(discount) {
        this.discount = discount;
    }
    setPrice(price) {
        this.price = price;
    }
    setTheMainImage(mainImage) {
        this.mainImage = mainImage;
    }
    getMainImage() {
        return this.mainImage;
    }
    addImage(image) {
        this.images.push(image);
    }
    setName(name) {
        this.name = name;
    }
    /**
     * metodo che controlla la presenza o meno di una variante
     * @param productVariant variante da controllare
     * @returns restituisce true se la variant è gia presente nel prodotto, false altrimenti
     */
    containsVariant(productVariant) {
        let contains = false;
        //  console.log("product = " + this.getJson());
        this.variants.forEach(element => {
            if (element.getId().match(productVariant.getId()) != null) {
                contains = true;
                return;
            }
        });
        return contains;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdEx1Y2EuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3VzZXJzL3NyYy9saWIvbW9kZWxzL3Byb2R1Y3RMdWNhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxXQUFXO0lBZXBCO1FBR0ksSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFFdkIsQ0FBQztJQUdNLE1BQU0sQ0FBQyxHQUFRO1FBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0lBQ3pCLENBQUM7SUFHTSxVQUFVLENBQUMsT0FBdUI7UUFDdkMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QyxPQUFPLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRDs7Ozs7T0FLRztJQUdJLFVBQVUsQ0FBQyxPQUF1QixFQUFFLFFBQWdCO1FBQ3pELE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDNUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBRWpELElBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsRUFBQztZQUMvQixJQUFJLEtBQUssR0FBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUN4RSxPQUFP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QUFHLFNBQVMsQ0FBQztJQUMvQixDQUFDO0lBQ00sWUFBWTtRQUNmLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBQ00sUUFBUSxDQUFDLEtBQVk7UUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNNLE9BQU8sQ0FBQyxJQUFXO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksZUFBZSxDQUFDLGNBQThCO1FBQ2pELElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN2QiwrQ0FBK0M7UUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDNUIsSUFBRyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDdEQsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDaEIsT0FBTzthQUNWO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0NBS0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9kdWN0VmFyaWFudCB9IGZyb20gXCIuL3Byb2R1Y3RWYXJpYW50XCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9kdWN0THVjYXtcblxuXG4gICAgcHJpdmF0ZSBuYW1lOnN0cmluZztcbiAgICAvKippZCBkZWwgcHJvZG90dG8gKi9cbiAgICBwcml2YXRlIGlkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkaXNjb3VudDogbnVtYmVyO1xuICAgIHByaXZhdGUgcHJpY2U6IG51bWJlcjtcbiAgICBwdWJsaWMgbWFpbkltYWdlIDogc3RyaW5nO1xuICAgIHByaXZhdGUgaW1hZ2VzIDogc3RyaW5nW107XG4gICAgcHVibGljIHZhcmlhbnRzIDogUHJvZHVjdFZhcmlhbnRbXTtcbiAgICBwdWJsaWMgbWF0ZXJpYWxpOiBzdHJpbmc7XG5cblxuXG4gICAgY29uc3RydWN0b3IoKXtcblxuXG4gICAgICAgIHRoaXMuaW1hZ2VzID0gW107XG4gICAgICAgIHRoaXMudmFyaWFudHMgPSBbXTtcblxuICAgIH1cblxuXG4gICAgcHVibGljIHNldEltZyhpbWc6IGFueSk6dm9pZHtcbiAgICAgICAgdGhpcy5tYWluSW1hZ2UgPSBpbWc7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc2V0VmFyaWFudCh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCk6dm9pZHtcbiAgICAgIHZhcmlhbnQuc2V0TWFpblByb2R1Y3RJbWFnZSh0aGlzLm1haW5JbWFnZSk7XG4gICAgICB2YXJpYW50LnNldE1haW5Qcm9kdWN0TmFtZSh0aGlzLm5hbWUpO1xuICAgICAgICB0aGlzLnZhcmlhbnRzLnB1c2godmFyaWFudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFnZ2l1bmdlIHVuYSB2YXJpYW50ZSBkaSB1biBwcm9kb3R0b1xuICAgICAqIEBwYXJhbSB2YXJpYW50IGxhIHZhcmlhbnRlIGRhIGFnZ2l1bmdlcmVcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkgbGEgcXVhbnRpdGEgZGEgYWdnaXVuZ2VyZVxuICAgICAqIFNlIGxhIHZhcmlhbnRlIGVzaXN0ZSBnacOgLCBuZSBpbmNyZW1lbnRhIGxhIHF1YW50aXRhLCBhbHRyaW1lbnRpIGFnZ2l1bmdlIHVuYSBudW92YSB2YXJpYW50ZVxuICAgICAqL1xuXG5cbiAgICBwdWJsaWMgYWRkVmFyaWFudCh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCwgcXVhbnRpdHk6IG51bWJlcikgOnZvaWQge1xuICAgICAgdmFyaWFudC5zZXRNYWluUHJvZHVjdEltYWdlKHRoaXMubWFpbkltYWdlKTtcbiAgICAgIHZhcmlhbnQuc2V0TWFpblByb2R1Y3ROYW1lKHRoaXMubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWRkaW5nIHRoaXMgcXVhbnRpdHk6IFwiICsgcXVhbnRpdHkpO1xuXG4gICAgICAgIGlmKHRoaXMuY29udGFpbnNWYXJpYW50KHZhcmlhbnQpKXtcbiAgICAgICAgICBsZXQgaW5kZXggPSAgdGhpcy52YXJpYW50cy5maW5kSW5kZXgocCA9PiBwLmdldElkKCkgPT0gdmFyaWFudC5nZXRJZCgpKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIml0ZW1zIGF2YWlsYWJsZSBpbiB0aGUgaW52ZW50b3J5ID0gIFwiICsgICB0aGlzLnZhcmlhbnRzW2luZGV4XS5nZXRJbnZlbnRvcnkoKSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJhZGRpbmcgdGhpcyBxdWFudGl0eTogXCIgKyAodGhpcy52YXJpYW50c1tpbmRleF0uZ2V0U2VsZWN0ZWQoKSArIHF1YW50aXR5KSk7XG4gICAgICAgICAgdGhpcy52YXJpYW50c1tpbmRleF0uYWRkU2VsZWN0ZWQoIHF1YW50aXR5KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm9rXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgIHZhcmlhbnQuc2V0U2VsZWN0ZWQocXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnZhcmlhbnRzLnB1c2godmFyaWFudCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBhZGRWYXJpYW50Tm9RdWFudGl0eSh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCkgOnZvaWQge1xuICAgICAgdmFyaWFudC5zZXRNYWluUHJvZHVjdEltYWdlKHRoaXMubWFpbkltYWdlKTtcbiAgICAgIHZhcmlhbnQuc2V0TWFpblByb2R1Y3ROYW1lKHRoaXMubmFtZSk7XG4gICAgICAgIHRoaXMudmFyaWFudHMucHVzaCh2YXJpYW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlVmFyaWFudCh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCkgOnZvaWQge1xuICAgICAgbGV0IGluZGV4ID0gIHRoaXMudmFyaWFudHMuZmluZEluZGV4KHByb2R1Y3QgPT4gcHJvZHVjdC5nZXRJZCgpID09IHZhcmlhbnQuZ2V0SWQoKSk7XG4gICAgICB0aGlzLnZhcmlhbnRzLnNwbGljZShpbmRleCwxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmFyaWFudCh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCkgOlByb2R1Y3RWYXJpYW50IHtcbiAgICAgICAgbGV0IGluZGV4ID0gIHRoaXMudmFyaWFudHMuZmluZEluZGV4KHByb2R1Y3QgPT4gcHJvZHVjdC5nZXRJZCgpID09IHZhcmlhbnQuZ2V0SWQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhbnRzW2luZGV4XTtcbiAgICB9XG5cblxuXG5cbiAgICBwdWJsaWMgZ2V0VmFyaWFudEJ5U2l6ZShzaXplOmFueSkgOlByb2R1Y3RWYXJpYW50IHtcbiAgICAgICAgbGV0IGluZGV4ID0gIHRoaXMudmFyaWFudHMuZmluZEluZGV4KHByb2R1Y3QgPT4gcHJvZHVjdC5nZXRTaXplKCkgPT09IHNpemUpO1xuICAgICAgICByZXR1cm4gdGhpcy52YXJpYW50c1tpbmRleF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZhcmlhbnRzKCkgOlByb2R1Y3RWYXJpYW50W10ge1xuICAgICAgICByZXR1cm4gdGhpcy52YXJpYW50cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SWQoKSA6U3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5hbWUoKSA6c3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGlzY291bnQoKSA6bnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzY291bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEpzb24oKSA6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UHJpY2VjKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmljZTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzZXRJZChpZDpzdHJpbmcpe1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfVxuICAgIHB1YmxpYyBzZXREaXNjb3VudChkaXNjb3VudDpudW1iZXIpe1xuICAgICAgICB0aGlzLmRpc2NvdW50PWRpc2NvdW50O1xuICAgIH1cbiAgICBwdWJsaWMgc2V0UHJpY2UocHJpY2U6bnVtYmVyKXtcbiAgICAgICAgdGhpcy5wcmljZT1wcmljZTtcbiAgICB9XG4gICAgcHVibGljIHNldFRoZU1haW5JbWFnZShtYWluSW1hZ2U6c3RyaW5nKXtcbiAgICAgICAgdGhpcy5tYWluSW1hZ2UgPSBtYWluSW1hZ2U7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRNYWluSW1hZ2UoKTpzdHJpbmd7XG4gICAgICAgIHJldHVybiB0aGlzLm1haW5JbWFnZTtcbiAgICB9XG4gICAgcHVibGljIGFkZEltYWdlKGltYWdlOnN0cmluZyl7XG4gICAgICAgIHRoaXMuaW1hZ2VzLnB1c2goaW1hZ2UpO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0TmFtZShuYW1lOnN0cmluZyl7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWV0b2RvIGNoZSBjb250cm9sbGEgbGEgcHJlc2VuemEgbyBtZW5vIGRpIHVuYSB2YXJpYW50ZVxuICAgICAqIEBwYXJhbSBwcm9kdWN0VmFyaWFudCB2YXJpYW50ZSBkYSBjb250cm9sbGFyZVxuICAgICAqIEByZXR1cm5zIHJlc3RpdHVpc2NlIHRydWUgc2UgbGEgdmFyaWFudCDDqCBnaWEgcHJlc2VudGUgbmVsIHByb2RvdHRvLCBmYWxzZSBhbHRyaW1lbnRpXG4gICAgICovXG4gICAgcHVibGljIGNvbnRhaW5zVmFyaWFudChwcm9kdWN0VmFyaWFudDogUHJvZHVjdFZhcmlhbnQpOiBib29sZWFue1xuICAgICAgICBsZXQgY29udGFpbnMgPSBmYWxzZTtcbiAgICAgIC8vICBjb25zb2xlLmxvZyhcInByb2R1Y3QgPSBcIiArIHRoaXMuZ2V0SnNvbigpKTtcbiAgICAgICAgdGhpcy52YXJpYW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgaWYoZWxlbWVudC5nZXRJZCgpLm1hdGNoKHByb2R1Y3RWYXJpYW50LmdldElkKCkpICE9IG51bGwgKXtcbiAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbnM7XG4gICAgfVxuXG5cblxuXG59XG4iXX0=