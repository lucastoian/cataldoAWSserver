export class ProductLuca {
    constructor() {
        this.images = [];
        this.variants = [];
    }
    setImg(img) {
        this.mainImage = img;
    }
    setVariant(variant) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        this.variants.push(variant);
    }
    /**
     * Aggiunge una variante di un prodotto
     * @param variant la variante da aggiungere
     * @param quantity la quantita da aggiungere
     * Se la variante esiste già, ne incrementa la quantita, altrimenti aggiunge una nuova variante
     */
    addVariant(variant, quantity) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        console.log("adding this quantity: " + quantity);
        if (this.containsVariant(variant)) {
            let index = this.variants.findIndex(p => p.getId() == variant.getId());
            console.log("items available in the inventory =  " + this.variants[index].getInventory());
            console.log("adding this quantity: " + (this.variants[index].getSelected() + quantity));
            this.variants[index].addSelected(quantity);
            console.log("ok");
            return;
        }
        else {
            variant.setSelected(quantity);
            this.variants.push(variant);
        }
    }
    addVariantNoQuantity(variant) {
        variant.setMainProductImage(this.mainImage);
        variant.setMainProductName(this.name);
        this.variants.push(variant);
    }
    removeVariant(variant) {
        let index = this.variants.findIndex(product => product.getId() == variant.getId());
        this.variants.splice(index, 1);
    }
    getVariant(variant) {
        let index = this.variants.findIndex(product => product.getId() == variant.getId());
        return this.variants[index];
    }
    getVariantBySize(size) {
        let index = this.variants.findIndex(product => product.getSize() === size);
        return this.variants[index];
    }
    getVariants() {
        return this.variants;
    }
    getId() {
        return this.id;
    }
    getName() {
        return this.name;
    }
    getJson() {
        return JSON.stringify(this);
    }
    getPricec() {
        return this.price;
    }
    setId(id) {
        this.id = id;
    }
    setDiscount(discount) {
        this.discount = discount;
    }
    setPrice(price) {
        this.price = price;
    }
    setTheMainImage(mainImage) {
        this.mainImage = mainImage;
    }
    getMainImage() {
        return this.mainImage;
    }
    addImage(image) {
        this.images.push(image);
    }
    setName(name) {
        this.name = name;
    }
    /**
     * metodo che controlla la presenza o meno di una variante
     * @param productVariant variante da controllare
     * @returns restituisce true se la variant è gia presente nel prodotto, false altrimenti
     */
    containsVariant(productVariant) {
        let contains = false;
        //  console.log("product = " + this.getJson());
        this.variants.forEach(element => {
            if (element.getId().match(productVariant.getId()) != null) {
                contains = true;
                return;
            }
        });
        return contains;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZHVjdEx1Y2EuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3VzZXJzL3NyYy9saWIvbW9kZWxzL1Byb2R1Y3RMdWNhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxXQUFXO0lBY3BCO1FBR0ksSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFFdkIsQ0FBQztJQUdNLE1BQU0sQ0FBQyxHQUFRO1FBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0lBQ3pCLENBQUM7SUFHTSxVQUFVLENBQUMsT0FBdUI7UUFDdkMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QyxPQUFPLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRDs7Ozs7T0FLRztJQUdJLFVBQVUsQ0FBQyxPQUF1QixFQUFFLFFBQWdCO1FBQ3pELE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDNUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBRWpELElBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsRUFBQztZQUMvQixJQUFJLEtBQUssR0FBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUN4RSxPQUFP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QUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBQ00sUUFBUSxDQUFDLEtBQVk7UUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNNLE9BQU8sQ0FBQyxJQUFXO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksZUFBZSxDQUFDLGNBQThCO1FBQ2pELElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN2QiwrQ0FBK0M7UUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDNUIsSUFBRyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDdEQsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDaEIsT0FBTzthQUNWO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0NBS0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9kdWN0VmFyaWFudCB9IGZyb20gXCIuL3Byb2R1Y3RWYXJpYW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvZHVjdEx1Y2F7XHJcblxyXG5cclxuICAgIHByaXZhdGUgbmFtZTpzdHJpbmc7XHJcbiAgICAvKippZCBkZWwgcHJvZG90dG8gKi9cclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgZGlzY291bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcHJpY2U6IG51bWJlcjtcclxuICAgIHB1YmxpYyBtYWluSW1hZ2UgOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGltYWdlcyA6IHN0cmluZ1tdO1xyXG4gICAgcHVibGljIHZhcmlhbnRzIDogUHJvZHVjdFZhcmlhbnRbXTtcclxuXHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmltYWdlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMudmFyaWFudHMgPSBbXTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzZXRJbWcoaW1nOiBhbnkpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5tYWluSW1hZ2UgPSBpbWc7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzZXRWYXJpYW50KHZhcmlhbnQ6IFByb2R1Y3RWYXJpYW50KTp2b2lke1xyXG4gICAgICB2YXJpYW50LnNldE1haW5Qcm9kdWN0SW1hZ2UodGhpcy5tYWluSW1hZ2UpO1xyXG4gICAgICB2YXJpYW50LnNldE1haW5Qcm9kdWN0TmFtZSh0aGlzLm5hbWUpO1xyXG4gICAgICAgIHRoaXMudmFyaWFudHMucHVzaCh2YXJpYW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWdnaXVuZ2UgdW5hIHZhcmlhbnRlIGRpIHVuIHByb2RvdHRvXHJcbiAgICAgKiBAcGFyYW0gdmFyaWFudCBsYSB2YXJpYW50ZSBkYSBhZ2dpdW5nZXJlXHJcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkgbGEgcXVhbnRpdGEgZGEgYWdnaXVuZ2VyZVxyXG4gICAgICogU2UgbGEgdmFyaWFudGUgZXNpc3RlIGdpw6AsIG5lIGluY3JlbWVudGEgbGEgcXVhbnRpdGEsIGFsdHJpbWVudGkgYWdnaXVuZ2UgdW5hIG51b3ZhIHZhcmlhbnRlXHJcbiAgICAgKi9cclxuXHJcblxyXG4gICAgcHVibGljIGFkZFZhcmlhbnQodmFyaWFudDogUHJvZHVjdFZhcmlhbnQsIHF1YW50aXR5OiBudW1iZXIpIDp2b2lkIHtcclxuICAgICAgdmFyaWFudC5zZXRNYWluUHJvZHVjdEltYWdlKHRoaXMubWFpbkltYWdlKTtcclxuICAgICAgdmFyaWFudC5zZXRNYWluUHJvZHVjdE5hbWUodGhpcy5uYW1lKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFkZGluZyB0aGlzIHF1YW50aXR5OiBcIiArIHF1YW50aXR5KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5jb250YWluc1ZhcmlhbnQodmFyaWFudCkpe1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gIHRoaXMudmFyaWFudHMuZmluZEluZGV4KHAgPT4gcC5nZXRJZCgpID09IHZhcmlhbnQuZ2V0SWQoKSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIml0ZW1zIGF2YWlsYWJsZSBpbiB0aGUgaW52ZW50b3J5ID0gIFwiICsgICB0aGlzLnZhcmlhbnRzW2luZGV4XS5nZXRJbnZlbnRvcnkoKSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImFkZGluZyB0aGlzIHF1YW50aXR5OiBcIiArICh0aGlzLnZhcmlhbnRzW2luZGV4XS5nZXRTZWxlY3RlZCgpICsgcXVhbnRpdHkpKTtcclxuICAgICAgICAgIHRoaXMudmFyaWFudHNbaW5kZXhdLmFkZFNlbGVjdGVkKCBxdWFudGl0eSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm9rXCIpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgIHZhcmlhbnQuc2V0U2VsZWN0ZWQocXVhbnRpdHkpO1xyXG4gICAgICAgIHRoaXMudmFyaWFudHMucHVzaCh2YXJpYW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhZGRWYXJpYW50Tm9RdWFudGl0eSh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCkgOnZvaWQge1xyXG4gICAgICB2YXJpYW50LnNldE1haW5Qcm9kdWN0SW1hZ2UodGhpcy5tYWluSW1hZ2UpO1xyXG4gICAgICB2YXJpYW50LnNldE1haW5Qcm9kdWN0TmFtZSh0aGlzLm5hbWUpO1xyXG4gICAgICAgIHRoaXMudmFyaWFudHMucHVzaCh2YXJpYW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlVmFyaWFudCh2YXJpYW50OiBQcm9kdWN0VmFyaWFudCkgOnZvaWQge1xyXG4gICAgICBsZXQgaW5kZXggPSAgdGhpcy52YXJpYW50cy5maW5kSW5kZXgocHJvZHVjdCA9PiBwcm9kdWN0LmdldElkKCkgPT0gdmFyaWFudC5nZXRJZCgpKTtcclxuICAgICAgdGhpcy52YXJpYW50cy5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZhcmlhbnQodmFyaWFudDogUHJvZHVjdFZhcmlhbnQpIDpQcm9kdWN0VmFyaWFudCB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gIHRoaXMudmFyaWFudHMuZmluZEluZGV4KHByb2R1Y3QgPT4gcHJvZHVjdC5nZXRJZCgpID09IHZhcmlhbnQuZ2V0SWQoKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFyaWFudHNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXRWYXJpYW50QnlTaXplKHNpemU6YW55KSA6UHJvZHVjdFZhcmlhbnQge1xyXG4gICAgICAgIGxldCBpbmRleCA9ICB0aGlzLnZhcmlhbnRzLmZpbmRJbmRleChwcm9kdWN0ID0+IHByb2R1Y3QuZ2V0U2l6ZSgpID09PSBzaXplKTtcclxuICAgICAgICByZXR1cm4gdGhpcy52YXJpYW50c1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZhcmlhbnRzKCkgOlByb2R1Y3RWYXJpYW50W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJZCgpIDpTdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROYW1lKCkgOnN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SnNvbigpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFByaWNlYygpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcmljZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHNldElkKGlkOnN0cmluZyl7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldERpc2NvdW50KGRpc2NvdW50Om51bWJlcil7XHJcbiAgICAgICAgdGhpcy5kaXNjb3VudD1kaXNjb3VudDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRQcmljZShwcmljZTpudW1iZXIpe1xyXG4gICAgICAgIHRoaXMucHJpY2U9cHJpY2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0VGhlTWFpbkltYWdlKG1haW5JbWFnZTpzdHJpbmcpe1xyXG4gICAgICAgIHRoaXMubWFpbkltYWdlID0gbWFpbkltYWdlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldE1haW5JbWFnZSgpOnN0cmluZ3tcclxuICAgICAgICByZXR1cm4gdGhpcy5tYWluSW1hZ2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkSW1hZ2UoaW1hZ2U6c3RyaW5nKXtcclxuICAgICAgICB0aGlzLmltYWdlcy5wdXNoKGltYWdlKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXROYW1lKG5hbWU6c3RyaW5nKXtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWV0b2RvIGNoZSBjb250cm9sbGEgbGEgcHJlc2VuemEgbyBtZW5vIGRpIHVuYSB2YXJpYW50ZVxyXG4gICAgICogQHBhcmFtIHByb2R1Y3RWYXJpYW50IHZhcmlhbnRlIGRhIGNvbnRyb2xsYXJlXHJcbiAgICAgKiBAcmV0dXJucyByZXN0aXR1aXNjZSB0cnVlIHNlIGxhIHZhcmlhbnQgw6ggZ2lhIHByZXNlbnRlIG5lbCBwcm9kb3R0bywgZmFsc2UgYWx0cmltZW50aVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29udGFpbnNWYXJpYW50KHByb2R1Y3RWYXJpYW50OiBQcm9kdWN0VmFyaWFudCk6IGJvb2xlYW57XHJcbiAgICAgICAgbGV0IGNvbnRhaW5zID0gZmFsc2U7XHJcbiAgICAgIC8vICBjb25zb2xlLmxvZyhcInByb2R1Y3QgPSBcIiArIHRoaXMuZ2V0SnNvbigpKTtcclxuICAgICAgICB0aGlzLnZhcmlhbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnQuZ2V0SWQoKS5tYXRjaChwcm9kdWN0VmFyaWFudC5nZXRJZCgpKSAhPSBudWxsICl7XHJcbiAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxufVxyXG4iXX0=